### 一、研究方向

##### 1. 获取研究方向

get /api/data/directions

这里把不是传图片的link.因为找不到好用的图床,而是直接把图片打包成base64
==希望得到的数据格式：json==

|   数据名称    |  类型  |                 说明                 |
| :-----------: | :----: | :----------------------------------: |
| directionName | string |              研究方向名              |
|      img      | string | 研究方向的图片描述，这里的是图片的base64
|  description  | string |            研究方向的描述            |

```json
{
  "directions":[
    {
      "id":"1234",
      "directionName":"web",
      "img":"xxxxxxxxxx==",
      "description":"web test"
    },
    {
      "id":"1234",
      "directionName":"ios",
      "img":"xxxxxxxxxx==",
      "description":"ios development"
    }
  ]
}
```
##### 2. 增加研究方向
post /api/add/direction
body如下

```json
{
  "directionName":"web",
  "img":"xxxxxxxxxx==",
  "description":"web test"
}
```

##### 3. 删除研究方向
post /api/delete/direction
body如下

```json
{
  "id":"1234",
}
```

##### 4. 获得指定数据的研究方向
get /api/data/directions/{count}
比如 get /api/data/directions/5
返回值和1一样


##### 5. 修改研究方向
post /api/change/direction
body如下

```json
{
  "id":"2134324",
  "directionName":"web",
  "img":"test.jpg",
  "description":"web test"
}
```


### 二、成果

##### 1. 获取论文及竞赛的最新信息

> 说明：api返回`指定数量`的最新论文及竞赛信息

==希望得到的数据格式：json==
get /api/data/achievements

achievements按时间排序，最新的在前

|     数据名称     | 类型  |   说明   |
| :--------------: | :---: | :------: |
| achievementsList | array | 成果列表 |

`achivement`格式：

|   数据名称   |  类型  |   说明   |
| :----------: | :----: | :------: |
| participants | string |   作者   |
|    title     | string | 论文标题 |
|  subTitle  | string |   副标题   |
|     year     | string | 发表年份 |
|     kind     | string | 类型 |
##### 示例：


```json
{
  "achievementsList":[
    {
      "id":"1234",
      "participants": "Xiawu Zheng, Yang Zhang, Sirui Hong, Huixia Li",
      "title": "Evolving Fully Automated Machine Learning via Life-Long Knowledge Anchors.",
      "subTitle": "IEEE Transactions on Pattern Analysis and Machine Intelligence (TPAMI)",
      "year": "2021",
      "kind": "papersList"
    }
  ]
}
```

##### 2. 获取完整的论文、竞赛及专利信息
get /api/data/allachievements

==希望得到的数据格式：json==

|    数据名称     | 类型  |  说明  |
| :-------------: | :---: | :----: |
|   papersList    | array | 论文集 |
| competitionList | array | 竞赛集 |
|   patentsList   | array | 专利集 |

> papersList、competitionList和patentsList里以年份进行分类存放，它们的元素都是相同的数据格式存储

|   数据名称   |  类型  |  说明  |
| :----------: | :----: | :----: |
| participants | string | 参与者 |
|    title     | string |  标题  |
|   subTitle   | string | 副标题 |
|     cite     | string |  链接  |

##### 示例：

```json
{
	"papersList": [{
      "id":"1234",
	  "participants": "Xiawu Zheng, Yang Zhang, Sirui Hong, Huixia Li",
	  "title": "Evolving Fully Automated Machine Learning via Life-Long Knowledge Anchors.",
	  "subTitle": "IEEE Transactions on Pattern Analysis and Machine Intelligence (TPAMI)",
	 "cite": "https://mac.xmu.edu.cn/papers/dblwlb.htm",
      "year": "2021"
		},{
      "id":"12324",
	  "participants": "Xiawu Zheng, Yang Zhang, Sirui Hong, Huixia Li",
	  "title": "Evolving Fully Automated Machine Learning via Life-Long Knowledge Anchors.",
	  "subTitle": "IEEE Transactions on Pattern Analysis and Machine Intelligence (TPAMI)",
	  "cite": "https://mac.xmu.edu.cn/papers/dblwlb.htm",
      "year": "2020"
		}],
    
	"competitionList":[{
      "id":"31234",
	  "participants": "Xiawu Zheng, Yang Zhang, Sirui Hong, Huixia Li",
	  "title": "Evolving Fully Automated Machine Learning via Life-Long Knowledge Anchors.",
	  "subTitle": "IEEE Transactions on Pattern Analysis and Machine Intelligence (TPAMI)",
	  "cite": "https://mac.xmu.edu.cn/papers/dblwlb.htm",
      "year": "2021"
		}],
    
	"patentsList": [{
      "id":"12334",
      "participants": "Xiawu Zheng, Yang Zhang, Sirui Hong, Huixia Li",
	  "title": "一种饮用水的氧化过滤除锰方法",
      "subTitle": "ZL 2016   11048326.7",
      "cite": "https://mac.xmu.edu.cn/papers/dblwlb.htm",
      "year": "2016"
		}]
}
```

##### 3. 增加新的论文或竞赛或专利信息

post /api/add/allachievement

> 由于采用的是相同的数据格式存储，所以这里仅需要区分类型即可
发送post的body类型

```json
{
  "participants": "Xiawu Zheng, Yang Zhang, Sirui Hong, Huixia Li",
  "title": "Evolving Fully Automated Machine Learning via Life-Long Knowledge Anchors.",
  "subTitle": "IEEE Transactions on Pattern Analysis and Machine Intelligence (TPAMI)",
  "year": "2021",
  "kind": "papers",
  "cite": "https://mac.xmu.edu.cn/papers/dblwlb.htm"
}
```
// kind 有papers  competition patents三种



##### 4. 删除新的论文或竞赛或专利信息
post /api/delete/achievement
body如下

```json
{
  "id":"1234",
}
```

##### 5. 修改成果信息
post /api/change/achievement
必须所有属性全部发送,是直接覆盖.
```json
{
  "id":"要修改的成果id",
  "participants": "Xiawu Zheng, Yang Zhang, Sirui Hong, Huixia Li",
  "title": "Evolving Fully Automated Machine Learning via Life-Long Knowledge Anchors.",
  "subTitle": "IEEE Transactions on Pattern Analysis and Machine Intelligence (TPAMI)",
  "year": "2021",
  "kind": "papers"
}
```

##### 6. 获得完整链接

get `/api/data/link`
返回值
```json
{
    "link":"http://baidu.com"
}
```

ps:我这里把link储存在picture数据库中.因为他们本质上都是只有一个link的数据结构.只是这个id为0而已
##### 7. 修改完整链接
post `/api/change/link`
body如下

```json
{
    "link":"http://baidu.com"
}
```



### 三、新闻资讯

##### 1. 获取最新新闻资讯

> 说明：api返回`指定数量`或全部的最新资讯，资讯需要按时间排序，最新发布的在前

get `/api/data/news` 返回全部
get `/api/data/news//{count}` 返回count个

==希望得到的数据格式：json==

| 数据名称 |  类型  |         说明          |
| :------: | :----: | :-------------------: |
|    id    | string |        资讯id         |
|  title   | string |         标题          |
|   date   | string | 日期，格式为2021-8-10 |

```json
{
	"news":[
    {
      "id":"123421",
      "title":"你好",
      "date":"2021-8-10"
    },
    {
      "id":"123431",
      "title":"今天过的很好",
      "date":"2021-8-30"
    }
  ]
}
```

##### 2. 获取指定资讯的内容

get /api/data/newsinfo/{id}
> api返回`指定id`的资讯内容

| 数据名称 |  类型  |         说明          |
| :------: | :----: | :-------------------: |
|  title   | string |         标题          |
| content  | string |         内容          |
|   date   | string | 日期，格式为2021-8-10 |

返回内容
```json
{
  "title":"ttt",
  "content":"sdafdsfsd",
  "date":"2021-4-3"
}
```

##### 3.增加新的资讯
post /api/add/news
> 使用post发送body格式为

| 数据名称 |  类型  |         说明          |
| :------: | :----: | :-------------------: |
|  title   | string |         标题          |
| content  | string |         内容          |
|   date   | string | 日期，格式为2021-8-10 |

```json
{
  "title":"今天天气真好",
  "content":"今天天气好,奖励大家10块钱",
  "date":"2021-4-3"
}
```
返回格式为
```json
{
	"state":"0",
}
```

##### 4.删除新的资讯
post /api/delete/news
> 使用post发送body格式为

```json
{
	"id":"1234"
}
```
返回格式为
```json
{
	"state":"0",
}
```

##### 5.修改新的资讯
post /api/change/news
> 使用post发送body格式为
```json
{
  "id":"1234",
  "title":"今天天气真好",
  "content":"今天天气好,奖励大家10块钱",
  "date":"2021-4-3"
}
```



### 四、学术团队

##### 1. 获取学术团队信息

get /api/data/people

> 学术团队分为三类：指导老师、本科生学术团队、研究生学术团队

##### 指导老师信息数据格式：

| 数据名称 |  类型  | 说明 |
|:--------:|:------:|:----:|
|   name   | string | 姓名 |
| position | string | 职位 |
|  email   | string | 邮箱 |
|   cite   | string | 主页 |
| img         |    string    |   照片的base64   |

##### 本科生/研究生学术团队数据格式：

| 数据名称  |  类型  |   说明   |
|:---------:|:------:|:--------:|
|   name    | string |   姓名   |
|   grade   | string |   年级   |
| direction | string | 研究方向 |
|   email   | string |   邮箱   |
|    img    | string |  照片的base64 |

##### 示例：

```json
{
  "teacher":[
    {
      "id":"1234",
      "name": "张三",
      "position": "教授",
      "email": "123@123.com",
      "cite": "www.zhangsan.com",
        "img":"xxxxxxxxxx=="
    }
  ],
  "bachelor":[
    {
      "id":"1234",
      "name": "李四",
      "grade": "2018级",
      "direction": "计算机视觉",
      "email": "123@qq.com",
        "img":"xxxxxxxxxx=="
    }
  ],
  "master":[
    {
      "id":"1234",
      "name": "王五",
      "grade": "2021级",
      "direction": "多目标",
      "email": "466@126.com",
        "img":"xxxxxxxxxx=="
    }
  ]
}
```

##### 2. 增加团队成员

post `/api/add/teacher`
> 向指导老师
使用post发送body格式为
```json
{
  "name": "张三",
  "position": "教授",
  "email": "123@123.com",
  "cite": "www.zhangsan.com",
  "img":"xxxxxxxxxx=="
}
```

post /api/add/bachelor
> 向本科学术团队/研究生学术团队增加成员
使用post发送body格式为
```json
{
  "name": "李四",
  "grade": "2018级",
  "direction": "计算机视觉",
  "email": "123@qq.com",
  "img":"xxxxxxxxxx=="
}
```

post `/api/add/master`
> 向研究生学术团队增加成员
使用post发送body格式为
```json
{
  "name": "张三",
  "grade": "2015级",
  "direction": "大数据",
  "email": "123@qq.com",
  "img":"xxxxxxxxxx=="
}
```
会返回.所以带add的都是这样
```json
{
  "state":"0"
}
```

> {state:xxx} 0,是成功 1.是不成功 2.是没有权限 3.是没有该数据(删除时)  4.已经有这个id了 (添加时) 


##### 3. 删除团队成员

post `/api/delete/teacher`
> 向指导老师团队删除成员
使用post发送body格式为
```json
{
 "id":"1234"
}
```

post `/api/delete/bachelor`
> 向本科学术团队删除成员
使用post发送body格式为
```json
{
  "id":"1234"
}
```

post `/api/delete/master`
> 向研究生学术团队删除成员
使用post发送body格式为
```json
{
   "id":"1234"
}
```

##### 4. 修改团队成员

post `/api/change/teacher`
> 向指导老师
使用post发送body格式为
```json
{
  "id":"23423",
  "name": "张三",
  "position": "教授",
  "email": "123@123.com",
  "cite": "www.zhangsan.com",
  "img":"xxxxxxxxxx=="
}
```

post `/api/change/bachelor`
> 向本科学术团队/研究生学术团队增加成员
使用post发送body格式为
```json
{
  "id":"23423",
  "name": "李四",
  "grade": "2018级",
  "direction": "计算机视觉",
  "email": "123@qq.com",
  "img":"xxxxxxxxxx=="
}
```

post `/api/change/master`
> 向研究生学术团队增加成员
使用post发送body格式为
```json
{
  "id":"23423",
  "name": "张三",
  "grade": "2015级",
  "direction": "大数据",
  "email": "123@qq.com",
  "img":"xxxxxxxxxx=="
}
```
会返回.所以带add的都是这样
```json
{
  "state":"0"
}
```

> {state:xxx} 0,是成功 1.是不成功 2.是没有权限 3.是没有该数据(删除时)  4.已经有这个id了 (添加时) 




### 五、桃李天下

##### 1. 获取全部毕业生情况

##### 毕业生的数据格式：
get `/api/data/students`

|  数据名称  |  类型  |   说明   |
| :--------: | :----: | :------: |
|    name    | string |   姓名   |
|  profile   | string |   图片的base64   |
| employment | string | 就业公司 |
|   email    | string |   邮箱   |

```json
{
  "students":[
    {
      "id":"1234",
      "name":"dsdfs",
      "profile":"xxxxxxxxxx==",
      "employment":"baidu",
      "email":"fuck@qq.com"
    },
    {
      "id":"123234",
      "name":"一红",
      "profile":"xxxxxxxxxx==",
      "employment":"bilbili",
      "email":"fuck@qq.com"
    }
  ]
}
```

##### 2. 增加毕业生信息
post `/api/add/student`
body如下

```json
{
  "name":"一红",
  "profile":"xxxxxxxxxx==",
  "employment":"bilbili",
  "email":"fuck@qq.com"
}
```


##### 3. 删除毕业生信息
post `/api/delete/student`
body如下

```json
{
    "id":"23423",
}
```


##### 4. 修改毕业生信息
post `/api/change/student`
body如下

```json
{ 
  "id":"23423",
  "name":"一红",
  "profile":"xxxxxxxxxx==",
  "employment":"bilbili",
  "email":"fuck@qq.com"
}
```


### 六、 登陆

#### 1.第一次登陆拿cookie



post `/api/login`

密码请在前端md5之后再传
body如下

```json
{
  "usernm": "123",
  "passwd": "e10adc3949ba59abbe56e057f20f883e" 
}
```

如果登陆成功会返回并且设置cookie.如果不是则返回1

```json
{
  "state":"0"
}
```

> {state:xxx} 0,是成功 1.是不成功 2.是没有权限 3.是没有该数据(删除时)  4.已经有这个id了 (添加时) 

#### 2.注册用户
post `/api/register`

body如下
==注意,会检查cookie.所以应该在登陆完之后才能注册其它的用户.第一个用户会在数据库里自带==

密码请在前端md5之后再传

```json
{
  "usernm": "123",
  "passwd": "e10adc3949ba59abbe56e057f20f883e"
}
```
正常的返回值

```json
{
  "state":"0"
}
```


#### 3.修改密码
post /api/change

body如下
==注意,会检查cookie.所以应该在登陆完之后才能修改密码==

密码请在前端md5之后再传


```json
{
  "usernm": "123",
  "passwd": "550a141f12de6341fba65b0ad0433500"
}
```
正常的返回值
```json
{
  "state":"0"
}
```

#### 4.修改用户
post /api/changeone

body如下
==注意,会检查cookie.所以应该在登陆完之后才能修改密码==

密码请在前端md5之后再传
这个是修改用户id为1的usernm和passwd

```json
{
  "usernm": "123",
  "passwd": "550a141f12de6341fba65b0ad0433500"
}
```
正常的返回值
```json
{
  "state":"0"
}
```



### 七、 生活娱乐

#### 1.获取图片
get `/api/data/pictures`
==这里虽然字段是link,但是传的还是图片的base64,因为实现没有好用的图床==
返回值
```json
{"pictures":[
        {
            "id":"123424234234",
            "link":"xxxxxxxxxx=="
        },
        {
            "id":"1235324232342",
            "link":"xxxxxxxxxx=="
        }
    ]
}
```

#### 2.添加图片
post `/api/add/picture`

body如下
```json
{"link":"https://werwer.com/erqwerwe/bibi.jpg"}
```

#### 3.删除图片
post `/api/delete/picture`
body如下

```json
{"id":"1234234134"}
```

#### 4.修改图片
post `/api/delete/picture`
==这里虽然字段是link,但是传的还是图片的base64,因为实现没有好用的图床==
body如下


```json
{
    "id":"1234234134",
    "link":"xxxxxxxxxx=="
}
```

### 杂项
#### 网站名字
##### 1.获取
get /api/data/name
```json
{
    "name":"test"
}
```
##### 2.修改
post /api/change/name
```json
{
    "name":"test"
}
```
ps:我这里把name当成link储存在picture数据库中.因为他们本质上都是只有一个link的数据结构.只是这个id为1而已



#### 备案信息
##### 1.获取
get /api/data/copyright
```json
{
    "copyright":"sdfsdfsdfsd"
}
```
##### 2.修改
post /api/change/copyright
```json
{
    "copyright":"sdfsdfsdfsd"
}
```
ps:我这里把copyright当成link储存在picture数据库中.因为他们本质上都是只有一个link的数据结构.只是这个id为2而已

#### 全部修改
post /api/change/all
```json
{
    "name":"2342342",
    "copyright":"sdfsdfsdfsd"
}
```
ps:我这里把copyright当成link储存在picture数据库中.因为他们本质上都是只有一个link的数据结构.只是这个id为2而已




#### 封面图片
##### 1.获取图片
get /api/data/banner
```json
{
    "banners":[
        {
            "id":"3",
            "link":"https://test.jpg"
        },
                {
            "id":"4",
            "link":"https://test.jpg"
        },

        {
            "id":"5",
            "link":"https://test.jpg"
        }
    ]
}
```
##### 2.删除图片
post /api/delete/banner
```json
{
    "id":"3",
}
```

##### 3.修改图片
post /api/change/banner
```json
{
    "id":"3",
    "link":"sdfsdfsdfsd"
}
```

##### 4.添加图片
post /api/add/banner
```json
{
    "link":"sdfsdfsdfsd"
}
```





### 部属程序
#### java
编译java 运行java

#### 连接mongo
在`application.properties`写
`
spring.data.mongodb.uri=mongodb://admin:密码@localhost:27017/web
spring.servlet.multipart.max-file-size=4MB
spring.servlet.multipart.max-request-size=4MB
`

#### mongo
登录
`db.auth("admin","密码")`
##### 添加用户
使用`web`库
`use web`
创建login集合

`db.createCollection("login")`
`db.login.insert({"id":"1","usernm" : "test","passwd" : "md5之后的"})`

##### 添加完整链接 
`db.createCollection("picture")`
`db.picture.insert({"id":"0","link":"http://baidu.com"})`
`db.picture.insert({"id":"1","link":"网络名"})`
`db.picture.insert({"id":"2","link":"copyright"})`

创建集合

```
db.createCollection("picture")
```



#### nginx

配置文件里加反代规则
```
location ^~ /api/ {
            client_max_body_size 1000m;
	        proxy_pass http://localhost:8080/;
        }
```

admin的配置

```
location ^~ /admin/ {
            client_max_body_size 1000m;
	        proxy_pass http://localhost:8080/;
        }
```



